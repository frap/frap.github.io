<?xml version='1.0' encoding='UTF-8'?>
<rss version='2.0' xmlns:atom='http://www.w3.org/2005/Atom'>
<channel>
<atom:link href='http://geek.red-elvis.net/' rel='self' type='application/rss+xml'/>
<generator>
clj-rss
</generator>
<title>
Remove Accidental Complexity
</title>
<link>
http://geek.red-elvis.net/
</link>
<description>
Rants of an Old Networking Geek
</description>
<lastBuildDate>
Thu, 29 Jan 2015 22:43:12 +1300
</lastBuildDate>
<author>
Andrés Gasson
</author>
<item>
<guid>
http://geek.red-elvis.net/posts/2015-01-26-first-post.html
</guid>
<link>
http://geek.red-elvis.net/posts/2015-01-26-first-post.html
</link>
<title>
re-start blog
</title>
<description>
&lt;h3&gt;&lt;a name=&quot;trying&amp;#95;out&amp;#95;cryogen&quot;&gt;&lt;/a&gt;Trying out cryogen&lt;/h3&gt;&lt;p&gt;After a lapse of a few years, I am now trying to get my notes updated with my new flavour of programming language - clojure. So trying out the static blogger &lt;a href='http://cryogenweb.org/docs/writing-posts.html'&gt;cyrogen&lt;/a&gt; which I hope can help me get my notes up to date.&lt;/p&gt;&lt;p&gt;Lets us see how easy and automated it is. Alos will need to sort out my git skills.&lt;/p&gt;&lt;p&gt;Gas.&lt;/p&gt;
</description>
<pubDate>
Mon, 26 Jan 2015 00:00:00 +1300
</pubDate>
<author>
Andrés Gasson
</author>
</item>
<item>
<guid>
http://geek.red-elvis.net/posts/2009-06-26-pim.html
</guid>
<link>
http://geek.red-elvis.net/posts/2009-06-26-pim.html
</link>
<title>
PIM Notes
</title>
<description>
&lt;h2&gt;&lt;a name=&quot;pim&amp;#95;neigbour&amp;#95;discovery&quot;&gt;&lt;/a&gt;PIM Neigbour Discovery&lt;/h2&gt;PIM routers send PIM Hello messages every 30 seconds on each PIM enabled interface.  The Hellos are sent to 224.0.0.13, the link local address reserved for All-PIM-Routers&lt;h2&gt;&lt;a name=&quot;pim&amp;#95;dr&quot;&gt;&lt;/a&gt;PIM DR&lt;/h2&gt;Hellos are used to find neighbors, and to determine who should be the Designated Router (DR) on multi-access networks.  If no DR priority configured, then the PIM router with the highest IP address wins.  In PIM Sparse Mode, the DR is responsible for registering to the RP, and forwarding traffic.&lt;h2&gt;&lt;a name=&quot;pim&amp;#95;asserts&quot;&gt;&lt;/a&gt;PIM Asserts&lt;/h2&gt;If a router sees traffic for a stream coming in on an interface it uses to forward traffic for the stream, it will send an Assert message on that interface.   The assert contains administrative distance and metric information for the route in the murib for the source of the stream.  First administrative distance is compared.  If equal, metric is compared.  If the metric is also equal, than the peer with the highest IP address wins. The loser prunes itself off the path for the stream.&lt;h2&gt;&lt;a name=&quot;pim&amp;#95;sm&quot;&gt;&lt;/a&gt;PIM SM&lt;/h2&gt;A PIM router creates (S,G) state under the following conditions&lt;ul&gt;&lt;li&gt;Traffic is seen on a directly connected interface.   Examples: DR, routers in path down RPT from RP to LH&lt;/li&gt;&lt;li&gt;An RP receives a Register message.&lt;/li&gt;&lt;li&gt;A Join for the (S,G) is received.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;A PIM router forwards (S,G) Joins towards the source when&lt;/p&gt;&lt;ul&gt;&lt;li&gt;The (S,G) has a valid outgoing interface list (olist) and the           router has RPF information for the source.&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;pim&amp;#95;ssm&quot;&gt;&lt;/a&gt;PIM SSM&lt;/h2&gt;If IGMP knows the sources it wants to receive, it can inform it's router.  PIM can then forward joins directly to the source.  PIM-SSM takes this a step further by outlawing (*,G) state in the SSM range.  Not only isn't an RP required, it's prohibited.&lt;p&gt;232.0.0.0/8 is the default range for SSM, but it can be configured to any other range as well. Currently though 232/8 is hardwired in our (XR, IOS?) IGMP implementation, so no (*,G) IGMP reports will be accepted in that range.&lt;/p&gt;&lt;p&gt;These rules are directly from the PIM spec.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;A router MUST NOT send a (*,G) Join/Prune message for any reason.&lt;/li&gt;&lt;li&gt;A router MUST NOT send an (S,G,rpt) Join/Prune message for any reason.&lt;/li&gt;&lt;li&gt;A router MUST NOT send a Register message for any packet that is  destined to an SSM address.&lt;/li&gt;&lt;li&gt;A router MUST NOT forward packets based on (*,G) or (S,G,rpt) state.   The (*,G) and (S,G,rpt) -related state summarization macros are NULL for any SSM address, for the purposes of packet forwarding.&lt;/li&gt;&lt;li&gt;A router acting as an RP MUST NOT forward any Register-encapsulated packet that has an SSM destination address&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;pim-bidir&quot;&gt;&lt;/a&gt;PIM-BIDIR&lt;/h2&gt;PIM-BIDIR makes the RPT bidirectional.   The RP is the hub of all traffic, though traffic does not have to go all the way to the RP to reach local leaf nodes.  BIDIR forwards on (*,G) routes.&lt;p&gt;Simpler than PIM-SM.  No data driven events (eg, S,G creation based on data, KAT). &lt;/p&gt;&lt;p&gt;New sources are forwarded on the path to the RP (called the (*,G/M) route.&lt;/p&gt;&lt;p&gt;New (*,G) joins propagate towards the RP, and inherit accepting information from the RP.  The joins will create outgoing interface information – pointing back towards the LH (Last Hop).&lt;/p&gt;&lt;h2&gt;&lt;a name=&quot;msdp&quot;&gt;&lt;/a&gt;MSDP&lt;/h2&gt;MSDP listens to PIM register messages, and if PIM installs an L flag for the route in the MRIB, MSDP sends the traffic in the registers encapsulated in Source Active (SA) messages to it's configured peers. &lt;p&gt;If the remote RP has local receivers for the (S,G), it installs the route into the PIM topology table and forwards the traffic down the RPT.  The LH router performs SPT switchover.&lt;/p&gt;&lt;p&gt;If the remote RP has no local PIM interest in the SA, the SA stays in the MSDP cache but is not installed in PIM.&lt;/p&gt;&lt;p&gt;An SA contains the (S,G) info, the RP that originated the SA, and the encapsulated data sent in the register.&lt;/p&gt;&lt;p&gt;MSDP can be thought of as a poor man's BGP. It doesn't have ASs (so NO good loop avoidance), and it doesn't have policy other than filtering.  It uses the below set of rules to determine which peers to accept SAs from, based on the RP which originated the SA. connect-source == peer address used originator-id == RP address SA sent from.&lt;/p&gt;&lt;p&gt; 1) The MSDP peer P's connect-source is equal to the originator-id of the SA&lt;/p&gt;&lt;p&gt; 2) The MSDP peer P's connect-source is equal to the BGP NEXT_HOP of the active route for the originator-id of the SA&lt;/p&gt;&lt;p&gt; 3) a) The active route for the originator-id of the SA is known via BGP and the MSDP peer P's connect-source is equal to the BGP peering address of the peer who announced the route.&lt;/p&gt;&lt;p&gt;   b) The active route for the originator-id of the SA is known via ISIS/OSPF and the MSDP peer P's connect-source is equal to the IGP next hop for the route.&lt;/p&gt;&lt;p&gt; 4) The MSDP peer P's connect-source is in an AS in the AS&lt;i&gt;PATH of the active route for the originator-id of the SA, and has the highest IP address of the MSDP peer's connect-sources which reside in ASs in that AS&lt;/i&gt;PATH.&lt;/p&gt;&lt;p&gt;5) The MSDP peer P is configured as the static RPF-peer.&lt;/p&gt;
</description>
<pubDate>
Fri, 26 Jun 2009 00:00:00 +1200
</pubDate>
<author>
Andrés Gasson
</author>
</item>
<item>
<guid>
http://geek.red-elvis.net/posts/2009-05-29-ACLs.html
</guid>
<link>
http://geek.red-elvis.net/posts/2009-05-29-ACLs.html
</link>
<title>
Access Control Lists (ACLs) - router
</title>
<description>
 &lt;p&gt;ACLs don't do anything by themselves, they need to be applied somewhere.&lt;/p&gt;&lt;p&gt;ACLs are processed top-down, the first match causes a break and stop the processing of further entries (until a new packet needs to be processed).&lt;/p&gt;&lt;p&gt;Access lists contain an implicit &quot;deny any&quot; at end.&lt;/p&gt;&lt;p&gt;If an access-list that doesn't exist is specified, it is deemed to permit everything. For example if you do a &quot;ip access-group 100&quot; on an interface without creating ACL 100 first, everything will be permitted. BUT, as soon as you put in the first statement in that ACL, the implicit deny all at the end will come into play. So be careful on production equipment - ALWAYS remove the ACL from the interface first before playing with an ACL.&lt;/p&gt;&lt;p&gt;Applying a non-existent access-list can lead to serious problems when creating the corresponding ACL - because IOS configs are live, you will get erratic behavior.&lt;/p&gt;&lt;p&gt;ACLs use Wildcard Masks&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Wildcard masks are the binary reverse of subnet masks&lt;/li&gt;&lt;li&gt;Wildcard masks can be discontiguous (subnet masks cannot)&lt;/li&gt;&lt;li&gt;0 bit =&gt; must match bits in address&lt;/li&gt;&lt;li&gt;1 bit =&gt; don't care. No need to match bits in address&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;ACLs to filter traffic flows:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Only one ACL (that could have multiple entries) can be applied per L3protocol, per interface, per direction.&lt;/li&gt;&lt;li&gt;Inbound ACLs check the filter condition BEFORE routing table lookup&lt;/li&gt;&lt;li&gt;Outbound ACLs checks the filter condition AFTER routing table lookup&lt;/li&gt;&lt;/ul&gt;&lt;h4&gt;&lt;a name=&quot;general&amp;#95;recommendations:&quot;&gt;&lt;/a&gt;General Recommendations:&lt;/h4&gt;&lt;ul&gt;&lt;li&gt;Invest time and carefully place ACLs… consider bandwidth, CPU, etc.&lt;/li&gt;&lt;li&gt;Place the ACLs with the most hits at the top of the list if possible.&lt;/li&gt;&lt;li&gt;Create ACL first, then apply to interface.&lt;/li&gt;&lt;li&gt;Use Standard Access lists when filtering near dest.&lt;/li&gt;&lt;li&gt;Use Extended Access lists when filtering near Source, and/or need tospecify protocol, ports, etc.&lt;/li&gt;&lt;li&gt;Remember there is always an implicit &quot;deny all&quot; at end of any ACL. Itmight still be a good idea to put an explicit &quot;deny ip any any log&quot; statementfor troubleshooting purposes.&lt;/li&gt;&lt;/ul&gt;&lt;h3&gt;&lt;a name=&quot;numbered&amp;#95;acls&quot;&gt;&lt;/a&gt;Numbered ACLs&lt;/h3&gt;&lt;p&gt;Editing or re-ordering of numbered ACLs (other than adding lines at end) requires to drop the whole ACL and re-create it.&lt;/p&gt;&lt;p&gt;	Router(config)# access-list ?&lt;/p&gt;&lt;p&gt;|:------------|:-----------------------------------------:|:------------------------| |&lt;strong&gt;Range&lt;/strong&gt; | &lt;strong&gt;Description&lt;/strong&gt; | &lt;strong&gt;Notes&lt;/strong&gt; |&lt;1-99&gt;|IP standard access list|Match on source address ONLY.| |&lt;100-199&gt;|IP extended access list|Match on source &amp; dest. address, protocol, port, etc.| |&lt;200-299&gt;|Protocol type-code access list|Match on Ethernet protocol type-codes| |&lt;300-399&gt;|DECnet access list| |&lt;400-499&gt;|XNS standard access list| |&lt;500-599&gt;|XNS extended access list| |&lt;600-699&gt;|Appletalk access list| |&lt;700-799&gt;|48-bit MAC address access list| |&lt;800-899&gt;|IPX standard access list| |&lt;900-999&gt;|IPX extended access list |&lt;1000-1099&gt;|IPX SAP access list |&lt;1100-1199&gt;|Extended 48-bit MAC address access list |&lt;1200-1299&gt;|IPX summary address access list |&lt;1300-1999&gt;|IP standard access list (expanded range)|Same as &lt;1-99&gt; |&lt;2000-2699&gt;|IP extended access list (expanded range)|Same as &lt;100-199&gt;&lt;/p&gt;&lt;h4&gt;&lt;a name=&quot;dynamic-extended&quot;&gt;&lt;/a&gt;dynamic-extended&lt;/h4&gt;&lt;p&gt;Extend the dynamic ACL absolute timer&lt;/p&gt;&lt;h4&gt;&lt;a name=&quot;rate-limit&quot;&gt;&lt;/a&gt;rate-limit&lt;/h4&gt;&lt;p&gt;Simple rate-limit specific access list&lt;/p&gt;&lt;h3&gt;&lt;a name=&quot;named&amp;#95;acls&quot;&gt;&lt;/a&gt;Named ACLs&lt;/h3&gt;&lt;p&gt;Named ACLs permit deleting specific lines. But they are not supported with every feature (yet).&lt;/p&gt;&lt;p&gt;Router(config)# ip access-list ?&lt;/p&gt;&lt;p&gt;|:------------|:-----------------------------------------:| |&lt;strong&gt;Option&lt;/strong&gt;|&lt;strong&gt;Description&lt;/strong&gt; |standard|Standard Access List |extended|Extended Access List |logging|Control access list logging |log-update|Control access list log updates&lt;/p&gt;&lt;h2&gt;&lt;a name=&quot;configuration&quot;&gt;&lt;/a&gt;Configuration&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;Standard&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;	access-list 10 permit 192.168.1.0 0.0.0.255 	! 	interface FastEthernet 0/0 	access-group 10 in&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Extended&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;	access-list 100 permit ip 192.168.1.0 0.0.0.255 172.16.1.0 0.0.255&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Named&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;	ip access-list&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Dynamic&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Time-Based&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;CBAC (Content Based Access Control)&lt;/strong&gt;&lt;/p&gt;&lt;h3&gt;&lt;a name=&quot;traffic&amp;#95;filtering&quot;&gt;&lt;/a&gt;Traffic Filtering&lt;/h3&gt;&lt;p&gt;CBAC intelligently filters TCP and UDP packets based on application-layer protocol session information. You can configure CBAC to permit specified TCP and UDP traffic through a firewall only when the connection is initiated from within the network you want to protect.&lt;/p&gt;&lt;p&gt;CBAC examines not only network layer and transport layer information but also examines the application-layer protocol information (such as FTP connection information) to learn about the state of the session. This allows support of protocols that involve multiple channels created as a result of negotiations in the control channel. Most of the multimedia protocols as well as some other protocols (such as FTP, RPC, and SQL*Net) involve multiple channels.&lt;/p&gt;&lt;p&gt;Java blocking can be configured to filter HTTP traffic based on the server address or to completely deny access to Java applets that are not embedded in an archived or compressed file.&lt;/p&gt;&lt;h3&gt;&lt;a name=&quot;traffic&amp;#95;inspection&quot;&gt;&lt;/a&gt;Traffic Inspection&lt;/h3&gt;&lt;p&gt;CBAC inspects traffic that travels through the firewall to discover and manage state information for TCP and UDP sessions. This state information is used to create temporary openings in the firewall's access lists to allow return traffic and additional data connections for permissible sessions.&lt;/p&gt;&lt;p&gt;Inspecting packets at the application layer, and maintaining TCP and UDP session information, provides CBAC with the ability to detect and prevent certain types of network attacks such as SYN-flooding.&lt;/p&gt;&lt;p&gt;CBAC helps to protect against DoS attacks in other ways. CBAC inspects packet sequence numbers in TCP connections to see if they are within expected ranges --CBAC drops any suspicious packets. You can also configure CBAC to drop half- open connections, which require firewall processing and memory resources to maintain. Additionally, CBAC can detect unusually high rates of new connections and issue alert messages. CBAC can help by protecting against certain DoS attacks involving fragmented IP packets.&lt;/p&gt;&lt;h3&gt;&lt;a name=&quot;alerts&amp;#95;and&amp;#95;audit&amp;#95;trails&quot;&gt;&lt;/a&gt;Alerts and Audit Trails&lt;/h3&gt;&lt;p&gt;Using CBAC inspection rules, you can configure alerts and audit trail information on a per-application protocol basis.&lt;/p&gt;&lt;h3&gt;&lt;a name=&quot;intrusion&amp;#95;detection&quot;&gt;&lt;/a&gt;Intrusion Detection&lt;/h3&gt;&lt;p&gt;CBAC provides a limited amount of intrusion detection to protect against specific SMTP attacks. With intrusion detection, SYSLOG messages are reviewed and monitored for specific &quot;attack signatures.&quot; Certain types of network attacks have specific characteristics, or signatures. When CBAC detects an attacks, it resets the offending connections and sends SYSLOG information to the SYSLOG server.&lt;/p&gt;&lt;h2&gt;&lt;a name=&quot;configuration&quot;&gt;&lt;/a&gt;Configuration&lt;/h2&gt;	!	ip inspect tcp idle-time 30	ip inspect name myCBAC tcp	ip inspect name myCBAC udp	ip inspect name myCBAC icmp	ip inspect name myCBAC http	ip inspect name myCBAC ftp	ip inspect name myCBAC smtp	ip inspect name myCBAC http java-list 1&lt;p&gt;Only allow java applets downloaded from network 3.0.0.0&lt;/p&gt;&lt;p&gt;	! 	interface Serial0/3 	 ip address 2.0.0.1 255.0.0.0 	 ip access-group 100 in&lt;/p&gt;&lt;p&gt;Permit certain types of necessary control traffic in but deny everything else.&lt;/p&gt;&lt;p&gt;	 ip inspect myCBAC out&lt;/p&gt;&lt;p&gt;Permit the return traffic in - as specified by CBAC.&lt;/p&gt;&lt;p&gt;	access-list 100 permit udp any any eq rip&lt;/p&gt;&lt;p&gt;	access-list 100 deny ip any any&lt;/p&gt;&lt;p&gt;	access-list 1 permit 3.0.0.0 0.255.255.255 	! 	ip port-map http 8000 list 40 	#Map HTTP to port 8000 for internal hosts 192.16.1.0 through .15 	ip port-map http 8080 	#Map HTTP globally to port 8080 for other hosts 	ip port-map ftp 8021 	#Map FTP globally to port 8021 	access-list 40 permit 192.16.1.0  0.0.0.15&lt;/p&gt;&lt;ul&gt;&lt;li&gt;In the CCIE lab, set both the max-incomplete and one-minute threshold ifasked to configure CBAC.     ip inspect max-incomplete high 1000&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Start deleting half open connections if they reach 1000.&lt;/p&gt;&lt;pre&gt;&lt;code&gt; ip inspect max-incomplete low 800
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Stop deleting half open connections if they reach 800.&lt;/p&gt;&lt;pre&gt;&lt;code&gt; ip inspect one-minute high 500
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Start deleting half open connections if they reach 500 in the last minute.&lt;/p&gt;&lt;pre&gt;&lt;code&gt; ip inspect one-minute low 400
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Stop deleting half open connections if they reach 400 in the last minute.&lt;/p&gt;&lt;pre&gt;&lt;code&gt; ip inspect tcp max-incomplete host 50 block 5
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Allow a maximum of incomplete connections of 50 per host. Block the host for 5 minutes if that treshold is reached..&lt;/p&gt;&lt;pre&gt;&lt;code&gt;ip inspect tcp finwait-time
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;?&lt;/p&gt;&lt;pre&gt;&lt;code&gt;ip inspect tcp synwait-time 20
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Wait 20 seconds before terminating a half=open connection.&lt;/p&gt;&lt;pre&gt;&lt;code&gt;ip inspect tcp idle-time 300
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Delete TCP connections when idle for 300 seconds.&lt;/p&gt;&lt;pre&gt;&lt;code&gt;ip inspect udp idle-time 300
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;?&lt;/p&gt;&lt;h2&gt;&lt;a name=&quot;links&quot;&gt;&lt;/a&gt;Links&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;[Configuring Context-Based Access Control ][1]&lt;/li&gt;&lt;li&gt;[Two-Interface Router with NAT CBAC Configuration][2]&lt;/li&gt;&lt;li&gt;[Auth-proxy Authentication Inbound (CBAC, no NAT) Configuration][3]&lt;/li&gt;&lt;li&gt;&lt;a href='http://www.cisco.com/en/US/products/sw/secursw/ps1018/products&lt;i&gt;qanda&lt;/i&gt;i'&gt;CBAC FAQ &lt;/a&gt;&lt;/li&gt;&lt;li&gt;[Benefits and Limitations of Context-Based Access Control][5]&lt;/li&gt;&lt;li&gt;&lt;a href='http://www.cisco.com/univercd/cc/td/doc/product/software/ios122/122cgc'&gt;Configuring Port to Application Mapping&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;links&quot;&gt;&lt;/a&gt;Links&lt;/h2&gt;&lt;p&gt;&lt;a href='http://www.cisco.com/warp/public/707/confaccesslists.html'&gt;Configuring IP Access Lists&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href='http://www.cisco.com/warp/public/105/ACLsamples.html'&gt;Configuring Commonly Used IP ACLs&lt;/a&gt;&lt;/p&gt;&lt;p&gt;[Cisco IOS Access-Lists (O'Reilly Book Sample Chapter) ][9]&lt;/p&gt;&lt;h2&gt;&lt;a name=&quot;reflexive&amp;#95;acls&quot;&gt;&lt;/a&gt;Reflexive ACLs&lt;/h2&gt;&lt;h3&gt;&lt;a name=&quot;information&quot;&gt;&lt;/a&gt;Information&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;Anything that can be done with reflexive ACL's can be done with CBAC -except that CBAC requires IOS FW Feature set.&lt;/li&gt;&lt;li&gt;In order of growing safety: (1) established (2) reflexive (3) CBAC&lt;/li&gt;&lt;li&gt;Reflexive access-lists (also called IP Session Filtering) is a form ofsession filetring that dynamically create openings to permit the returntraffic from a connection.&lt;/li&gt;&lt;li&gt;Reflexive ACLs requires a named extended ACL. Reflexive access lists canbe defined with extended named IP access lists only. You cannot definereflexive access lists with numbered or standard named IP access lists or withother protocol access lists.&lt;/li&gt;&lt;li&gt;The reflexive access-list is used in conjunction to another access-list itis evaluated against.&lt;/li&gt;&lt;li&gt;You can use reflexive access lists in conjunction with other standardaccess lists and static extended access lists.&lt;/li&gt;&lt;li&gt;With reflexive, be careful with timers. &quot;ip reflexive-list timeout&quot;default is 300 sec. Alternatively, it can be specified on each entry of theACL or globally.&lt;/li&gt;&lt;li&gt;The reflected ACL doesn't need to be placed at the end of the list.&lt;/li&gt;&lt;li&gt;You can use &quot;show access-lists&quot; while a connection is happening to see thedynamically created entries.&lt;/li&gt;&lt;/ul&gt;&lt;h3&gt;&lt;a name=&quot;configuration&quot;&gt;&lt;/a&gt;Configuration&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;interface Ethernet 0/0
  ip address 192.168.1.1 255.255.255.0
  ip access-group comingIn in
  ip access-group goingOut out
!
ip access-list extended comingIn
  permit udp any any eq rip
 evaluate myPackets
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&quot;myPackets&quot; will be the name of the reflexive ACL - it will be appended to ACL ComingIn&lt;/p&gt;&lt;pre&gt;&lt;code&gt;ip access-list extended goingOut
 permit tcp any any eq telnet reflect myPackets timeout 300
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;With per ACL timeout (in seconds)&lt;/p&gt;&lt;pre&gt;&lt;code&gt;ip reflexive-list timeout 600
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Global timeout (in seconds )&lt;/p&gt;&lt;h3&gt;&lt;a name=&quot;links&quot;&gt;&lt;/a&gt;Links&lt;/h3&gt;&lt;p&gt;[Configuring IP Session Filtering (Reflexive Access Lists)][10]&lt;/p&gt;&lt;h3&gt;&lt;a name=&quot;appendix&quot;&gt;&lt;/a&gt;Appendix&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;With basic standard and static extended access lists, you can approximatesession filtering by using the established keyword with the permit command.The established keyword filters TCP packets based on whether the ACK or RSTbits are set. (Set ACK or RST bits indicate that the packet is not the firstin the session, and therefore, that the packet belongs to an establishedsession.) There are two main caveats to doing this: (1) the filter criterionwould be part of an access list applied permanently to an interface and (2) itonly applies to TCP, not UDP.&lt;/li&gt;&lt;li&gt;In order of growing safety: (1) established (2) reflexive (3) CBAC&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Established ACL that permits the return traffic of established telnet connections.&lt;/p&gt;&lt;pre&gt;&lt;code&gt;interface Serial0/3
 ip address 2.0.0.1 255.0.0.0
 ip access-group 100 in
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;access-list 100 permit tcp any eq telnet any established
access-list 100 permit udp any any eq rip&amp;lt;br&amp;gt; access-list 100 deny ip any any
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;With basic standard and static extended access lists, you can approximate session filtering by using the established keyword with the permit command. The established keyword filters TCP packets based on whether the ACK or RST bits are set. (Set ACK or RST bits indicate that the packet is not the first in the session, and therefore, that the packet belongs to an established session.) There are two main caveats to doing this: (1) the filter criterion would be part of an access list applied permanently to an interface and (2) it only applies to TCP, not UDP. Reflexive ACLs are better in those regards and should be used for more complete solutions.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;In order of growing safety: (1) established (2) reflexive (3) CBAC&lt;/li&gt;&lt;li&gt;CBAC can be used to filter java applets AND SYN attacks.&lt;/li&gt;&lt;li&gt;CBAC doesn't work with ICMP. You must use regular ACLs for that.&lt;/li&gt;&lt;li&gt;It the test specify for high/low timers/counts. Do it for both max-incomplete and one minute values.&lt;/li&gt;&lt;li&gt;Regular ACLs are applied BEFORE CBAC.&lt;/li&gt;&lt;li&gt;Put an explicit deny/log at the end of ACLs to make sure the filter isworking right.&lt;/li&gt;&lt;li&gt;Only CBAC can do multiport applications simply and correctly (like FTPTCP20/21).&lt;/li&gt;&lt;li&gt;The &quot;ip inspect&quot; statement can be put on either the inside interfaceinbound or outside interface outbound, depending on the desired result (dmz,etc.).&lt;/li&gt;&lt;li&gt;You can use &quot;show access-lists&quot; while a connection is happening to see thedynamically created entries.&lt;/li&gt;&lt;li&gt;CBAC works with CEF, fast switching and process switching.&lt;/li&gt;&lt;li&gt;For firewall FS, the keys are: ip inspect, ip auth-proxy, and ip audit /ip ips&lt;/li&gt;&lt;li&gt;Netmeeting also required generic TCP inspection in addition of H.323 (&quot;ipinspect name myCBAC tcp&quot;)&lt;/li&gt;&lt;li&gt;IOS cannot do both SMTP and ESMTP. Use ESMTP to support both.&lt;/li&gt;&lt;li&gt;When doing port-map, the ports are additive - if you add a custom port-map, it adds to the existing port (NBAR is replacive)&lt;/li&gt;&lt;/ul&gt;r/fsecur_c/ftrafwl/scfcbac.htmration_example09186a0080094110.shtmlration_example09186a00800942ff.shtmltem09186a008009464d.shtmlr/fsecur_c/ftrafwl/scfpam.htm#1000871ed&lt;i&gt;cr/secur&lt;/i&gt;c/scprt3/screflex.htm
</description>
<pubDate>
Fri, 29 May 2009 00:00:00 +1200
</pubDate>
<author>
Andrés Gasson
</author>
</item>
</channel>
</rss>
