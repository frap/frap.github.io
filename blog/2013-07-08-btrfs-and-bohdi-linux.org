#+TITLE: bohdi linux and btrfs
#+DATE: 2013-07-08
#+SETUPFILE: ~/Dev/ruby/octopress/octopress.org
#+JEKYLL_LAYOUT: post
#+JEKYLL_CATEGORIES: [btrfs, linux, reliability, docker]
#+JEKYLL_PUBLISHED: true


So I'm looking into [[http://www.docker.io][docker]] and [[https://github.com/dotcloud/dockerlite][dockerlite]] for lightweight virtualisation - aka  [[https://help.ubuntu.com/lts/serverguide/lxc.html%5D][LXC's]].
Docker is programmed in [[http://golang.org][go]] and not knowing anything about go I stumbled across [[https://github.com/dotcloud/dockerlite][dockerlite.]] It uses bash scripts and btrfs. [[https://btrfs.wiki.kernel.org/index.php/Main_Page][Btrfs]] is a cool disk format that allows sub-volumes as well as a lot of other nifty features.
Therefore I thought I would install btrfs on my [[http://www.bodhilinux.com][bohdi linux]] VM which had an ext4 disk and start checking out its reliability. I used an ubuntu live CD to reconfigure the partiton following these [[http://www.howtoforge.com/how-to-convert-an-ext3-ext4-root-file-system-to-btrfs-on-ubuntu-12.10][conversion from ext to btrfs instructions]].

It seems to have worked well.

{{{more}}}

#+BEGIN_SRC bash
sudo btrfs filesystem show
failed to read /dev/sr0
Label: none  uuid: 84b1d850-876b-4902-abcb-80312e619d0d
	Total devices 1 FS bytes used 4.18GB
	devid    1 size 7.50GB used 7.50GB path /dev/sda1

Btrfs Btrfs v0.19

sudo btrfs filesystem df /
Data: total=4.97GB, used=2.41GB
System: total=32.00MB, used=4.00KB
Metadata: total=2.50GB, used=1.77GB

sudo btrfs subvolume list /
ID 256 top level 5 path ext2_saved

ls -las /ext2_saved/
total 3957176
      4 drwxr-xr-x 1 root root         10 Jul  7 17:38 .
      0 drwxr-xr-x 1 root root        280 Jul  3 19:30 ..
3957172 -r-------- 1 root root 8052015104 Jan  1  1970 image

#+END_SRC


Now I need to play with dockerlite.
